<!DOCTYPE html>
<html manifest="app.cache">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="theme-color" content="#999999">
  <link rel="icon" href="static/app-icons/black-circle.png">
  <!-- Save to homescreen icons -->
  <!-- <link rel="manifest" href="manifest.json"> -->
  <link rel="apple-touch-icon"                 href="static/app-icons/logo-76.png" /><!-- sizes="76x76" -->
  <link rel="apple-touch-icon" sizes="120x120" href="static/app-icons/logo-120.png" />
  <link rel="apple-touch-icon" sizes="152x152" href="static/app-icons/logo-152.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="static/app-icons/logo-180.png" />
  <link rel="icon"             sizes="192x192" href="static/app-icons/logo-192.png">
  <link rel="icon"             sizes="128x128" href="static/app-icons/logo-128.png">

  <title>lunch</title>
  <meta name="description" content="Lunch will be served…">

  <!-- <link rel="stylesheet" href="/FuturesForum/css/normalize.css"> -->
  <style>/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style>
  <link rel="stylesheet" href="/FuturesForum/assets/main-dd942ca38af1c5ec9cc0733b1d7247a1.css">
  <!-- <link rel="stylesheet" href="/FuturesForum/css/main.css"> -->

  <link rel="canonical" href="http://bvn-architecture.github.io/FuturesForum//006-lunch.html">
  <link rel="alternate" type="application/rss+xml" title="Futures Forum" href="http://bvn-architecture.github.io/FuturesForum//feed.xml" />

</head>


  <body>
    <div class="menu-button">
      <a href="#">
        menu
        <!-- <span class="menu-icon"><span></span><span></span><span></span></span> -->
    </a>
</div>

<nav>
    <div class="menu-items">
        <ul>
            <li><a href="/FuturesForum/">Programme</a></li>
            <li><a href="/FuturesForum/icons/index.html">Icons</a></li>
            <li><a href="/FuturesForum/essays/">Essays</a></li>
            <li><a href="/FuturesForum/other-pages/bigquestions.html">Big Questions</a></li>
            <li><a href="/FuturesForum/other-pages/map.html">Map</a></li>
        </ul>
    </div>
    <!-- <div class="menu-logo">
        <span></span>
    </div> -->
</nav>
    <div class="noon card" style="height: 20.0em;">
  <span class="start-time">13:30</span>
  <div class="front">
    <h1>lunch</h1>
    <!-- <a href="https://twitter.com/intent/tweet?button_hashtag=LS&text=%23FuturesForum" class="twitter-hashtag-button" data-size="large" data-related="notionparallax">Tweet #LS</a> -->
    <article class="post-content">
    <p>Lunch will be served…</p>

<p>Add menu</p>

  </article>
  </div>
  <div class="back"><h1>OMG!</h1></div>
</div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script>
$(document).ready(function() {
  console.log("here we go");


    var selectedCardManager = new function() {
      var selectedCard = null;
      this.removeCurrentCard = function() {
        $(selectedCard).children('.ff-twitter-widget').children().remove();
        selectedCard = null;
      };
      this.setCurrentCard = function(newCard) {
        selectedCard = newCard;
        var twitterWidgetParent = $(selectedCard).find('.ff-twitter-widget');
        var twitterWidget = $('<a href="">')
          .addClass('twitter-timeline')
          .attr('width','')
          .attr('height','')
          .attr('data-widget-id', twitterWidgetParent.data('widget-id'))
          .attr('data-theme','light')
          .attr('data-link-color','rgba(150,150,150,1)')
          .attr('data-chrome','noheader nofooter noborders transparent noscrollbar')
          .attr('data-tweet-limit','20')
          .attr('data-aria-polite','polite')[0];
        // console.log('created: ', twitterWidget);
        twitterWidgetParent.append(twitterWidget);
        twttr.widgets.load(twitterWidgetParent[0]);
        // console.log('appended to: ', twitterWidgetParent);
      };
      this.manage = function(newCard) {
        console.log('Managing:', newCard);
        if (selectedCard === null) {
          console.log('setting current card');
          this.setCurrentCard(newCard);
        } else {
          console.log('removing current card');
          this.removeCurrentCard();
        }
      }
    }();


    //move the marker according to the time.
    var getRootElementFontSize = function() {
      return parseFloat( getComputedStyle( document.documentElement ).fontSize ); //http://tzi.fr/js/snippet/convert-em-in-px
    }
    var timepx = function(offset){
      return getRootElementFontSize()*(timeInEms()-offset);
    };
    var timeInEms = function(){
      var now = new Date(Date.now());
      //var now = new Date(Date.parse("Tue May 05 2015 19:30:00 GMT+1000"));
      var time = now.getHours() + (now.getMinutes()/60) + (now.getSeconds()/3600); //time in decimal hours
      var convertedTime = time * exchangeRate;
      return convertedTime;
    };
    var moveMarker = function(){
      convertedTime = timeInEms();
      // console.log(convertedTime);
      $(".time-marker").css( "top", convertedTime + "rem" );
    }
    var pointArrow = function(){
      var jumpRectangle = document.getElementById("jump-button").getBoundingClientRect();
      var yOffset       = window.pageYOffset;
      var topOff        = jumpRectangle.top + (jumpRectangle.height/2);
      var scrollOffset  = yOffset+topOff;
      var d             = scrollOffset-timepx(0);
      var adjacent      = window.innerWidth - (jumpRectangle.width/2);

      var angle = -Math.atan(d/adjacent);

      // console.log(
      //             "yOffset",     Math.round(yOffset),
      //             "topOff",      Math.round(topOff),
      //             "scrollOffset",Math.round(scrollOffset),
      //             "d",           Math.round(d),
      //             "adjacent",    Math.round(adjacent),
      //             "angle",       angle
      //             );
      document.getElementById("jump-button").style["transform"] = "rotate("+angle+"rad)";
    };


    var exchangeRate=20;//ems per hour
    moveMarker();
    pointArrow();
    window.setInterval(moveMarker, 30000);

    $('.card').on('click tap', function(e) {
        selectedCardManager.manage( this );

        $(this).toggleClass("live-one");
        $('html, body').animate({ scrollTop: $(this).offset().top }, 300);
        $("body").toggleClass("noscroll");
    });

    $('.jump').on('click tap', function(e) {
        window.scrollTo(0, timepx(20));
    });

    $('.menu-button').on('click tap', function(e) {
        e.preventDefault();
        moveMarker();
        if(!window.weHaveHadOneScroll){
            window.weHaveHadOneScroll = true;
            $(".stack-layer").removeClass("out");
            console.log("removed out");

        }
        $("nav").toggleClass("in");
    });

    $( window ).scroll(function(){

      pointArrow();

      if(!window.weHaveHadOneScroll){
        moveMarker();
        //is this hammering the performance?
        window.weHaveHadOneScroll = true;
        $("nav").addClass("in");
        $(".stack-layer").removeClass("out");
      }
    });

    $(".menu-items a").each(function(){
      if($(this).attr("href") === window.location.pathname){
        $(this).parent().addClass("on-this-page");
      }
    });

});

!function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0],
        p = /^http:/.test(d.location) ? 'http' : 'https';
    if (!d.getElementById(id)) {
        js = d.createElement(s);
        js.id = id;
        js.src = p + "://platform.twitter.com/widgets.js";
        fjs.parentNode.insertBefore(js, fjs);
    }
}(document, "script", "twitter-wjs");
</script>

<script src="http://platform.twitter.com/widgets.js"></script>

  </body>

</html>
